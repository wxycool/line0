var myDirective = angular.module("myDirective", []);

myDirective.directive("storeCate", function() {
    return {
        scope: {},
        restrict: "AE",
        link: function(a, b) {
            b.parent().children().first().addClass("cur"), b.children("button").bind("tap", function() {
                //console.log(scope.$parent.$index);
                b.addClass("cur").siblings().removeClass("cur"), $(".store-some").eq(a.$parent.$index).show().siblings().hide(), 
                myScrollStoreRight.refresh();
            });
        }
    };
}), myDirective.directive("prodtypeid", function() {
    return {
        restrict: "AE",
        scope: {},
        link: function(a, b, c) {
            "0000" == c.prodtypeid && b.show();
        }
    };
}), myDirective.directive("stockCartClick", function() {
    return {
        scope: {},
        restrict: "AE",
        link: function(a, b) {
            b.bind("tap", function() {
                b.hide(), b.next().show(), a.this.$parent.$parent.$parent.prod.buyNum++, //console.log(scope.this.$parent.$parent.$parent.prod.buyNum);
                b.next().children(".select-val").val(a.this.$parent.$parent.$parent.prod.buyNum), 
                b.next().children(".select-val").change();
            });
        }
    };
}), myDirective.directive("selectSub", function() {
    return {
        scope: {},
        restrict: "AE",
        link: function(a, b) {
            b.bind("tap", function() {
                a.this.$parent.$parent.prod.buyNum--, a.this.$parent.$parent.prod.buyNum < 0 && (a.this.$parent.$parent.prod.buyNum = 0, 
                b.parent().hide(), b.parent().prev().show()), b.next().val(a.this.$parent.$parent.prod.buyNum), 
                b.next().change();
            });
        }
    };
}), myDirective.directive("selectAdd", function() {
    return {
        scope: {},
        restrict: "AE",
        link: function(a, b) {
            b.bind("tap", function() {
                a.this.$parent.$parent.prod.buyNum++, b.prev().val(a.this.$parent.$parent.prod.buyNum), 
                b.prev().change();
            });
        }
    };
}), myDirective.directive("goodsDetailClick", function() {
    return {
        restrict: "AE",
        replace: !0,
        template: '<li ng-click="GoodsDetailCtrl()">商品信息</li>',
        link: function(a, b) {
            b.addClass("cur").siblings().removeClass("cur"), b.bind("click", function() {
                b.addClass("cur").siblings().removeClass("cur"), //console.log(element.index(), $('.goods-tab'));
                $(".goods-tab").eq(b.index()).show().siblings().hide(), $(".store-cart").show(), 
                $(".store-cart-mask").show(), $.getScript("lib/other/iscroll-probe.min.js", function() {
                    myScrollGoods = new IScroll("#scroller", {
                        tap: !0,
                        preventDefault: !1
                    }), document.addEventListener("touchmove", function(a) {
                        a.preventDefault();
                    }, !1);
                });
            });
        }
    };
}), myDirective.directive("goodsCommentClick", function() {
    return {
        restrict: "AE",
        replace: !0,
        template: '<li ng-click="GoodsCommentCtrl()">用户评论</li>',
        link: function(a, b) {
            b.bind("click", function() {
                b.addClass("cur").siblings().removeClass("cur"), //console.log(element.index(), $('.goods-tab'));
                $(".goods-tab").eq(b.index()).show().siblings().hide(), $(".store-cart").hide(), 
                $(".store-cart-mask").hide(), $.getScript("lib/other/iscroll-probe.min.js", function() {
                    myScrollGoods = new IScroll("#scroller", {
                        tap: !0,
                        preventDefault: !1
                    }), document.addEventListener("touchmove", function(a) {
                        a.preventDefault();
                    }, !1), goods_detail = !0;
                });
            });
        }
    };
}), myDirective.directive("goodsArticleClick", function() {
    return {
        restrict: "AE",
        replace: !0,
        template: '<li class="{{goods.ArticleShow}}" ng-click="GoodsArticleCtrl()" style="display: none;">图文详情</li>',
        link: function(a, b) {
            b.bind("click", function() {
                b.addClass("cur").siblings().removeClass("cur"), //console.log(element.index(), $('.goods-tab'));
                $(".goods-tab").eq(b.index()).show().siblings().hide(), $(".store-cart").hide(), 
                $(".store-cart-mask").hide(), $.getScript("lib/other/iscroll-probe.min.js", function() {
                    myScrollGoods = new IScroll("#scroller", {
                        tap: !0,
                        preventDefault: !1
                    }), document.addEventListener("touchmove", function(a) {
                        a.preventDefault();
                    }, !1), goods_detail = !0;
                });
            });
        }
    };
}), myDirective.directive("onFinishRenderFilters", function() {
    return {
        restrict: "AE",
        link: function(a, b, c) {
            var d = c.ngSrc;
            loadImage(d, function() {
                waterfallImgIndex++, //console.log(waterfallImgIndex, waterfallImgLen,  scope.$index);
                waterfallImgIndex >= waterfallImgLen && (waterfallImgIndex = 0, //console.log('onFinishRenderFiltersEnd');
                a.$emit("ngRepeatFinished"));
            });
        }
    };
}), myDirective.directive("myDirective", function() {});